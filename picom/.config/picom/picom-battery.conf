# =============================================================================
# PICOM CONFIGURATION FOR PANGOLIN - BATTERY OPTIMIZED VERSION
# Save as: ~/.config/picom/picom-battery.conf
# =============================================================================

# Backend Configuration
backend = "glx";
vsync = true;

# GLX Backend Optimizations
glx-no-stencil = true;
glx-no-rebind-pixmap = true;
glx-use-copysubbuffer-mesa = true;
glx-copy-from-front = true;
glx-swap-method = 2;

# XRender Settings
xrender-sync = true;
xrender-sync-fence = true;

# Maximum Performance Optimizations
use-damage = true;
refresh-rate = 0;
unredir-if-possible = true;
resize-damage = 1;

# Disable Visual Effects for Battery Saving
shadow = false;
fading = false;
blur-background = false;

# Minimal Opacity (only for critical visibility)
opacity-rule = [
  "100:class_g = 'firefox'",
  "100:class_g = 'chromium'",
  "95:class_g = 'Rofi'"
];

# Essential Window Type Rules
wintypes:
{
  dock = { shadow = false; };
  dnd = { shadow = false; };
};

# Focus Detection (lightweight)
mark-wmwin-focused = true;
mark-ovredir-focused = true;
detect-client-opacity = true;
